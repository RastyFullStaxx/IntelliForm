<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>IntelliForm Workspace</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="/static/css/workspace.css" />
</head>
<body>
  <!-- Navbar -->
  <nav class="workspace-navbar">
    <div class="navbar-left">
      <button id="togglePages" class="icon-button" title="Toggle Thumbnails">☰</button>
    </div>

    <div class="navbar-center">
      <span id="pageInfo" class="rounded-box dark-box">Page —</span>
      <span class="vertical-divider">|</span>
      <span id="zoomInfo" class="rounded-box dark-box">100%</span>
    </div>

    <div class="navbar-right">
      <button id="printPDF" class="icon-button" aria-label="Print PDF" title="Print">
        <img src="/static/img/round-print.png" alt="Print"/>
      </button>
      <button id="downloadPDF" class="icon-button" aria-label="Download PDF" title="Download">
        <img src="/static/img/round-download.png" alt="Download"/>
      </button>
    </div>
  </nav>

  <!-- Sidebar Toggle Icon -->
  <div id="floatingToggleWrapper">
    <div id="sidebarToggle" title="Toggle Tools">
      <img src="/static/img/imgMainLogo.png" alt="Toggle Tools" />
    </div>
  </div>

  <!-- Tools Sidebar -->
  <aside id="sidebar">
    <div class="sidebar-title">
      <h5>IntelliForm</h5>
    </div>

    <div class="sidebar-tool" id="analyzeTool">
      <img src="/static/img/icoAnalyze.png" alt="Analyze"/>
      <span class="tool-label">Analyze</span>
    </div>

    <div class="sidebar-tool" id="searchTool">
      <img src="/static/img/icoSearch.png" alt="Search"/>
      <span class="tool-label">Search</span>
    </div>

    <!-- Form title / filename -->
    <div id="formNameDisplay" class="text-center my-3"></div>

    <!-- Results -->
    <div class="analysis-summary p-3 rounded">
      <div id="summaryList" class="accordion summary-scroll"><!-- populated by JS --></div>

      <div class="mb-3 text-center">
        <span id="eceScoreBadge" class="badge bg-info text-dark" style="font-size:0.9rem;">
          ECE Score: --
        </span>
      </div>

      <div class="mb-2 text-center" id="metricsRow" style="font-size:12px; opacity:.9;">
        <!-- Precision / Recall / F1 -->
      </div>
    </div>
  </aside>

  <!-- Thumbnails -->
  <div id="thumbnailSidebar"></div>

  <!-- PDF Canvas Viewer -->
  <main id="pdfContainer">
    <canvas id="pdfCanvas"></canvas>
    <canvas id="overlayCanvas" style="position:absolute; left:0; top:0; pointer-events:none;"></canvas>
  </main>

  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
  </script>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- ✅ Cache-busted JS (forces browser to fetch the newest version) -->
<script src="/static/js/workspace.js?v=20251009b"></script>
</body>
</html>
