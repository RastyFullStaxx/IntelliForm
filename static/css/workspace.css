/* ===== Global ===== */
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  color: #ffffff;
  overflow: hidden;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: linear-gradient(-45deg,#001840,#0a1f3d,#1e2c4c,#000e1f);
  background-size: 400% 400%;
  animation: darkWave 5s ease infinite;
}
@keyframes darkWave {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

/* ===== Navbar ===== */
.workspace-navbar{
  position: sticky; top:0; width:100%; height:80px;
  background: linear-gradient(90deg,#031a46,#07224f,#0a2c5a,#031a46);
  background-size:300% 100%; animation: navbarSlide 3s linear infinite;
  display:flex; justify-content:space-between; align-items:center;
  padding:0 15px; z-index:1002; box-shadow:0 2px 4px rgba(0,0,0,0.3);
}
@keyframes navbarSlide{0%{background-position:0% 0%}100%{background-position:100% 0%}}
.icon-button{background:none;border:none;color:white;font-size:18px;cursor:pointer}
#downloadPDF{margin-right:40px}
.navbar-center{display:flex;align-items:center;gap:8px;font-size:14px}
.rounded-box{padding:4px 10px;border-radius:4px;font-weight:600;font-size:14px}
.dark-box{background-color:#111827;color:#ffffff}
.vertical-divider{font-size:18px;color:#ccc;font-weight:300}
#togglePages{margin-left:2rem}

/* ===== NEW: Navbar edit toolbar ===== */
.edit-toolbar { display:flex; align-items:center; gap:6px; margin-right:16px; }
.toolbar-divider { opacity:.6; }
.toolbar-pill {
  padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.15);
  background: rgba(255,255,255,.06); color:#fff; font-weight:700;
}
.toolbar-pill.success { background:#155e34; border-color:#1e9c5a; }
.tool-btn {
  width:34px; height:34px; border-radius:8px; border:1px solid rgba(255,255,255,.15);
  display:flex; align-items:center; justify-content:center; font-size:18px;
  background: rgba(255,255,255,.06); color:#fff;
}
.tool-btn.active { outline:2px solid #ffd54a; }
.tool-btn:disabled, #btnUndo:disabled, #btnClear:disabled, #btnSave:disabled, #enterEdit.disabled {
  opacity:.45; cursor:not-allowed;
}

/* Widen buttons that have dropdown carets (Pen/Highlight) */
.tool-dropdown > .tool-btn {
  width: 46px;                /* room for caret */
  padding-right: 4px;         /* tiny breathing space */
}

/* ===== Sidebar Toggle Button ===== */
#floatingToggleWrapper{position:fixed; top:200px; right:-10px; z-index:1001}
#sidebarToggle{
  background: linear-gradient(135deg,#1f3a64,#2a3e5f,#0d1b2a,#1f3a64);
  background-size:300% 300%; animation: chromaticShift 1s ease-in-out infinite;
  border-radius:20%; width:80px; height:70px; display:flex; justify-content:center; align-items:center;
  box-shadow:0 0 15px rgba(0,0,0,0.4); cursor:pointer; transition: box-shadow .3s ease;
}
#sidebarToggle:hover{ box-shadow:0 0 20px #4180c9, 0 0 30px #1f3a64 }
@keyframes chromaticShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
#sidebarToggle img{width:60px; height:50px}

/* ===== Tools Sidebar ===== */
#sidebar{
  position:fixed; top:80px; right:-370px; width:340px; height:100%;
  padding:60px 15px 20px; z-index:1000;
  background: radial-gradient(circle at 20% 30%, #1c3a6c, #2e0775 60%);
  background-size:200% 200%; animation: sidebarWaves 3s ease-in-out infinite;
  box-shadow:-3px 0 10px rgba(0,0,0,0.3); transition:right .3s ease; overflow-y:auto;
  border-left:2px solid rgba(255,255,255,.05);
}
#sidebar.open{ right:0 }
@keyframes sidebarWaves{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.sidebar-tool{ background-color:#192b61; display:flex; align-items:center; margin-bottom:20px; cursor:pointer; padding:10px; border-radius:10px; transition:background .2s ease }
.sidebar-tool:hover{ background-color:rgba(255,255,255,0.1) }
.sidebar-tool img{ width:49px; height:40px; margin-right:10px }
.sidebar-tool span{ color:white; font-size:14px }

.sidebar-title{ text-align:center; margin-top:1rem; margin-bottom:.75rem }
.sidebar-title h5{
  font-size:1.3rem; font-weight:700; color:#fff; letter-spacing:.5px; text-transform:uppercase; margin-top:-39px;
  text-shadow:0 0 4px #4180c9, 0 0 8px #1f3a64, 0 0 12px #1f3a64; animation: glowPulse 2s ease-in-out infinite;
}
@keyframes glowPulse{
  0%{text-shadow:0 0 4px #4180c9,0 0 8px #1f3a64,0 0 12px #1f3a64}
  50%{text-shadow:0 0 6px #5fa8f0,0 0 10px #1f4a84,0 0 14px #1f4a84}
  100%{text-shadow:0 0 4px #4180c9,0 0 8px #1f3a64,0 0 12px #1f3a64}
}

#summaryList{ max-height:550px; overflow-y:auto; scrollbar-width:none; -ms-overflow-style:none }
#summaryList::-webkit-scrollbar{ display:none }

.analysis-summary{
  border-top:1px solid rgba(255,255,255,.3); margin-top:auto; padding-top:15px; color:white; font-size:13px;
}
#eceScoreBadge{ font-size:12px; padding:6px 10px; color:#fff; border-radius:10px; display:inline-block;
  background: linear-gradient(270deg,#0a2c5a,#1766dd,#3ed8ff); background-size:400% 400%; animation: eceGlowGradient 8s ease infinite;
  box-shadow: inset 0 0 8px rgba(62,216,255,.4), 0 0 4px rgba(62,216,255,.2);
}
@keyframes eceGlowGradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

.accordion-item{ background:transparent; border:none; margin-bottom:6px }
.accordion-header{
  color:#fff; padding:8px 10px; font-size:13px; font-weight:700; cursor:pointer; border-radius:20px; margin-bottom:10px; overflow:hidden;
  background: linear-gradient(270deg,#1b3a83,#274089,#1b3a83); background-size:400% 400%; animation: headerGradient 10s ease infinite;
  box-shadow:inset 0 0 6px rgba(30,90,200,.3), 0 0 4px rgba(30,90,200,.2); text-shadow:0 0 4px rgba(255,255,255,.25);
}
.accordion-content{ background:#152c58; padding:6px 12px; color:white; font-size:12px; display:none; border-radius:12px; margin-bottom:15px }
.accordion-content.active{ display:block }
.summary-label{ color:#FFD700; font-weight:600; cursor:pointer; text-decoration:underline; }
.summary-label:focus,.summary-label:hover{ text-decoration:underline; outline:none; }

#formNameDisplay{
  font-size:13px; font-weight:700; text-align:center; margin-bottom:10px;
  background: linear-gradient(90deg,#ffeb3b,#f5c400,#ffd700); color:#000; padding:8px 12px; border-radius:20px;
  box-shadow:0 0 10px rgba(255,215,0,.4); animation: shimmerGlow 4s ease infinite;
}
@keyframes shimmerGlow{0%{background-position:0% 50%}100%{background-position:100% 50%}}
@keyframes headerGradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

/* ===== PDF container & aligned layers ===== */
#pdfContainer{
  flex:1;
  overflow-y:auto;
  padding:20px;
  display:flex;
  justify-content:center;
  align-items:flex-start;   /* top align the page */
  position:relative;
}
#pdfContainer::-webkit-scrollbar{ display:none }

/* Shared wrapper so all layers share origin & CSS size */
.pageLayer { position: relative; margin-top:60px; }

/* All layers fill the wrapper; internal resolution handled in JS via DPR */
#pdfCanvas, #overlayCanvas, .annotationLayer {
  position:absolute;
  left:0; top:0;
  width:100%; height:100%;
}

/* (Legacy rule removed) — sizing is now driven by wrapper+JS DPR
#pdfCanvas{ max-width:90%; height:auto; background:#fff; box-shadow:0 0 10px rgba(0,0,0,.4); margin-top:60px }
*/
#pdfCanvas{
  background:#fff;
  box-shadow:0 0 10px rgba(0,0,0,.4);
}

/* ===== Thumbnails ===== */
#thumbnailSidebar{
  position:fixed; top:80px; left:0; width:200px; height:calc(100vh - 45px);
  background:#122850; border-right:1px solid #1f3a64; overflow-y:auto; display:none; z-index:999; padding:10px;
}
#thumbnailSidebar.visible{ display:block }
.thumbnail{ margin-bottom:10px; cursor:pointer; border:2px solid transparent; transition:border .2s ease }
.thumbnail:hover{ border-color:#3ca2ff }
.thumbnail-wrapper{text-align:center; margin-bottom:15px}
.thumbnail-label{ font-size:.8rem; color:#fff; margin-top:4px }

/* ===== Edit-layer pointer hints ===== */
body.pen-mode    { cursor: crosshair; }
body.hl-mode     { cursor: crosshair; }
body.text-mode   { cursor: text; }

/* Text annotation nodes (floating while editing) */
.text-annot {
  position: absolute;
  min-width: 40px;
  padding: 2px 4px;
  background: rgba(255,255,255,.85);
  color: #000;
  border: 1px dashed #666;
  border-radius: 3px;
  font: 14px/1.2 'Inter', sans-serif;
  z-index: 5;
}
.text-annot[contenteditable="true"]:focus { outline: 2px solid #0ea5e9; }

/* Sidebar sticky footer */
.sidebar-footer{
  position: sticky;
  bottom: 0;
  justify-content: center;
  z-index: 1;
}

/* Reuse pill look but neutral name (no 'ECE' wording) */
.badge-pill{
  font-size: 14px;
  font-weight: 700;
  padding: 10px 18px;
  border-radius: 999px;
  color: #fff;
  display: inline-block;
  cursor: pointer;
  background: linear-gradient(270deg,#1766dd,#22c55e,#0a2c5a);
  background-size: 400% 400%;
  animation: eceGlowGradient 8s ease infinite;
  box-shadow: inset 0 0 8px rgba(62,216,255,.25), 0 0 8px rgba(34,197,94,.25);
  user-select: none;
}

/* Text annotation: better drag affordance */
.text-annot{ cursor: text; }
.text-annot:hover{ cursor: move; }
.text-annot.dragging{ cursor: grabbing; }

.workspace-navbar { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.navbar-right { display:flex; align-items:center; }
.edit-toolbar { display:flex; align-items:center; gap:6px; flex-wrap:nowrap; }
.toolbar-divider { opacity:.4; padding:0 4px; }
.icon-button { display:inline-flex; align-items:center; justify-content:center; gap:4px; }

.edit-toolbar { display:flex; align-items:center; gap:8px; }
.icon-button.active { background: #ffeaa7; } /* subtle yellow */
.tool-dropdown { position: relative; }
.tool-dropdown .caret { font-size: 0.8em; margin-left: 4px; }
.dropdown-menu {
  position: absolute; top: 100%; left: 0;
  display: none; min-width: 180px; z-index: 10;
  padding: 8px; border: 1px solid rgba(0,0,0,.1); border-radius: 8px;
  background: #fff; box-shadow: 0 8px 24px rgba(0,0,0,.12);
}
.dropdown-menu.open { display: block; }
.dropdown-menu .menu-row { display:flex; align-items:center; justify-content:space-between; gap:8px; margin:6px 0; }

/* ===== Responsive tweaks (13–14″ laptops) ===== */
@media (max-width: 1366px) {
  #sidebar { width: 300px; right: -330px; }
  #thumbnailSidebar { width: 170px; }
  .workspace-navbar { height: 64px; }
  #togglePages { margin-left: 1rem; }
  .edit-toolbar { gap: 4px; }
  .tool-dropdown > .tool-btn { width: 44px; } /* slightly tighter but still comfy */
  #pdfContainer { padding: 12px; }
}

/* ==== Inline search tile (icon + input + controls) ==== */
.sidebar-tool.search-inline{
  gap: 10px;
  align-items: center;
  padding: 10px;
}
.sidebar-tool.search-inline img{
  width: 32px;
  height: 26px;
  margin-right: 6px;
  flex: 0 0 auto;
}
.sidebar-tool.search-inline input{
  flex: 1 1 auto;
  min-width: 0; /* allow shrink */
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,.25);
  padding: 8px 10px;
  background: rgba(255,255,255,.08);
  color: #fff;
  outline: none;
}
.sidebar-tool.search-inline .search-ctrls{
  display: flex;
  align-items: center;
  gap: 6px;
  flex: 0 0 auto;
}
.sidebar-tool.search-inline .search-ctrls button{
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.25);
  color: #fff;
  border-radius: 8px;
  padding: 6px 8px;
  cursor: pointer;
}
.sidebar-tool.search-inline #searchStatus{
  font-size: 12px;
  opacity: .9;
  min-width: 36px;
  text-align: center;
}
@media (max-width: 360px){
  .sidebar-tool.search-inline{ flex-direction: column; align-items: stretch; }
  .sidebar-tool.search-inline .search-ctrls{ justify-content: flex-end; }
}

/* make the Exit icon a bit more "danger" flavored */
#btnExit { color: #fca5a5; }
#btnExit:hover { color: #ef4444; }

